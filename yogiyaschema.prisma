generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model User{
    id Int @id @default(autoincrement())
    email String @unique
    nickname String @unique
    password String
    googleflage Boolean @default(false)
    createAt DateTime @default(now())
    updateAt DateTime?

    
    //profile
    //deviceinfo
    //friend
    Profile Profile[]
    DeviceInfo DeviceInfo[]
    FriendInfo FriendInfo[]    
}



//프로필 정보저장
model Profile {
  id         Int    @id @default(autoincrement())
  userId     Int    @unique
  filePath   String @db.VarChar(255)
  fileType   String @db.VarChar(127)
  fileSize   Int    @default(0)
  
  User      User    @relation(fields: [userId],references: [id])
  @@index([userId],name : "User_Fk")
}

//위도,경도,배털,속도이미지 데이터관리
model DeviceInfo{
    id Int @id @default(autoincrement())
    userId Int @unique
    latitude Float
    longitude Float
    battery Int
    speedId Int
    
    User User @relation(fields: [userId],references: [id])
    SpeedType SpeedType @relation(fields: [speedId],references: [id])
    @@index([userId],name:"User_Fk")
    @@index([speedId],name:"SpeedType_Fk")


}

//스피드 타입데이터 저장용
model SpeedType{
    id Int @id @default(autoincrement())
    type String
    isFlag Boolean @default(true)

    DeviceInfo DeviceInfo[]

}

//친구정보
model FriendInfo{
    id Int @id @default(autoincrement())
    userId Int @unique
    list Json

    User User @relation(fields: [userId],references: [id])
    @@index([userId],name:"User_Fk")
}


//timer_value, [5,10,20,30,60...]
model Setting {
  id    Int    @default(autoincrement())
  key   String @default("") @db.VarChar(50)
  param String @default("") @db.VarChar(50)
  value String @default("") @db.VarChar(1024)

  @@unique([key, param], name: "key_param")
  @@index([id], name: "id")
}


//공지사항 or 사용법
model Board{
    id      Int     @id @default(autoincrement())
    bsId    Int
    title   String  @db.VarChar(50)
    content String  @db.Text
    CreateAt DateTime @default(now())

}


// 보류
// model BoardSetting{
//     id Int @id @default(autoincrement())
//     coment String  @db.VarChar(50)
    
    

// }